{"version":3,"file":"vue-notifications.js","sources":["../src/main.js"],"sourcesContent":["const PLUGIN_NAME = 'VueNotifications'\nconst PACKAGE_NAME = 'vue-notifications'\nconst PROPERTY_NAME = 'notifications'\n\nconst TYPES = {\n  error: 'error',\n  warn: 'warn',\n  info: 'info',\n  success: 'success'\n}\n\nconst EVANGELION = 1\n\nconst MESSAGES = {\n  alreadyInstalled: `${PLUGIN_NAME}: plugin already installed`,\n  methodNameConflict: `${PLUGIN_NAME}: names conflict - `\n}\n\nfunction getVersion (Vue) {\n  const version = Vue.version.match(/(\\d+)/g)\n  return +version[0]\n}\n\nfunction showDefaultMessage ({type, message, title}) {\n  let msg = `Title: ${title}, Message: ${message}, Type: ${type}`\n  if (type === TYPES.error) console.error(msg)\n  else if (type === TYPES.warn) console.warn(msg)\n  else console.log(msg)\n}\n\nfunction getValues (vueApp, config) {\n  const result = {}\n\n  Object.keys(config).forEach(field => {\n    if (field === 'cb') {\n      result[field] = config[field].bind(vueApp)\n    } else {\n      result[field] = (typeof config[field] === 'function') ? config[field].call(vueApp) : config[field]\n    }\n  })\n\n  return result\n}\n\nfunction showMessage (config, vueApp) {\n  const valuesObj = getValues(vueApp, config)\n  const isMethodOverridden = VueNotifications.pluginOptions[valuesObj.type]\n  const method = isMethodOverridden ? VueNotifications.pluginOptions[valuesObj.type] : showDefaultMessage\n  method(valuesObj, vueApp)\n\n  if (config.cb) return config.cb()\n}\n\nfunction addMethods (targetObj, typesObj) {\n  Object.keys(typesObj).forEach(v => {\n    targetObj[typesObj[v]] = function (config) {\n      config.type = typesObj[v]\n      // TODO (S.Panfilov) fix 'vueApp' in param\n      return showMessage(config)\n    }\n  })\n}\n\nfunction setMethod (vueApp, name, options, pluginOptions) {\n  if (!options.methods) options.methods = {}\n\n  // ///////////////////////////////////////////////////////////////////////\n  // TODO (S.Panfilov) We can't check if method already exist,\n  // cause it won't allow us to use same component more then one tine in the same page\n  // But it would be good to check somehow if it's already exist a method that was created not from this plugin\n\n  // if (options.methods[name]) {\n  // console.error(MESSAGES.methodNameConflict + name)\n  // } else {\n  //   options.methods[name] = makeMethod(vueApp, name, options, pluginOptions)\n  // }\n\n  // ///////////////////////////////////////////////////////////////////////\n\n  if (!options.methods[name]) {\n    options.methods[name] = makeMethod(vueApp, name, options, pluginOptions)\n  }\n}\n\nfunction makeMethod (vueApp, configName, options, pluginOptions) {\n  return function (config) {\n    const newConfig = Object.assign({},\n      VueNotifications.config,\n      options[VueNotifications.propertyName][configName],\n      config)\n\n    return showMessage(newConfig, pluginOptions, vueApp)\n  }\n}\n\nfunction initVueNotificationPlugin (vueApp, notifications, pluginOptions) {\n  if (!notifications) return\n  Object.keys(notifications).forEach(name => setMethod(vueApp, name, vueApp.$options, pluginOptions))\n  vueApp.$emit(`${PACKAGE_NAME}-initiated`)\n}\n\nfunction unlinkVueNotificationPlugin (vueApp, notifications) {\n  if (!notifications) return\n  const attachedMethods = vueApp.$options.methods\n  Object.keys(notifications).forEach(name => {\n    if (attachedMethods[name]) {\n      attachedMethods[name] = undefined\n      delete attachedMethods[name]\n    }\n  })\n\n  vueApp.$emit(`${PACKAGE_NAME}-unlinked`)\n}\n\nfunction makeMixin (Vue, pluginOptions) {\n  const init = getVersion(Vue) === EVANGELION ? 'init' : 'beforeCreate'\n\n  return {\n    [init]: function () {\n      //this === vueApp\n      const notificationsField = this.$options[VueNotifications.propertyName]\n      initVueNotificationPlugin(this, notificationsField, pluginOptions)\n    },\n    'beforeDestroy': function () {\n      //this === vueApp\n      const notificationsField = this.$options[VueNotifications.propertyName]\n      unlinkVueNotificationPlugin(this, notificationsField)\n    }\n  }\n}\n\nconst VueNotifications = {\n  types: TYPES,\n  propertyName: PROPERTY_NAME,\n  config: {\n    type: TYPES.info,\n    timeout: 3000\n  },\n  pluginOptions: {},\n  installed: false,\n  /**\n   * Plugin | vue-notifications\n   * @param  {Function} Vue\n   * @param  {Object} pluginOptions\n   * @this VueNotifications\n   */\n  install (Vue, pluginOptions = {}) {\n    if (this.installed) throw console.error(MESSAGES.alreadyInstalled)\n    const mixin = makeMixin(Vue, pluginOptions)\n    Vue.mixin(mixin)\n\n    this.setPluginOptions(pluginOptions)\n    addMethods(this, this.types)\n\n    this.installed = true\n  },\n  setPluginOptions (options = {}) {\n    this.pluginOptions = options\n  }\n\n  //TODO (S.Panfilov) add ability to access this.notifications.someError.message\n  //TODO (S.Panfilov) add \"noCall:true\" property\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(VueNotifications)\n}\n\n/*START.TESTS_ONLY*/\nVueNotifications._private = {}\nVueNotifications._private.getVersion = getVersion\nVueNotifications._private.showDefaultMessage = showDefaultMessage\nVueNotifications._private.getValues = getValues\nVueNotifications._private.showMessage = showMessage\nVueNotifications._private.addMethods = addMethods\nVueNotifications._private.setMethod = setMethod\nVueNotifications._private.makeMethod = makeMethod\nVueNotifications._private.initVueNotificationPlugin = initVueNotificationPlugin\nVueNotifications._private.unlinkVueNotificationPlugin = unlinkVueNotificationPlugin\nVueNotifications._private.makeMixin = makeMixin\nVueNotifications._private.TYPES = TYPES\nVueNotifications._private.PLUGIN_NAME = PLUGIN_NAME\nVueNotifications._private.PACKAGE_NAME = PACKAGE_NAME\nVueNotifications._private.PROPERTY_NAME = PROPERTY_NAME\nVueNotifications._private.EVANGELION = EVANGELION\nVueNotifications._private.MESSAGES = MESSAGES\n\nexport default VueNotifications\n/*END.TESTS_ONLY*/\n"],"names":["PLUGIN_NAME","PACKAGE_NAME","PROPERTY_NAME","TYPES","EVANGELION","MESSAGES","getVersion","Vue","version","match","showDefaultMessage","type","message","title","msg","error","console","warn","log","getValues","vueApp","config","result","keys","forEach","field","bind","call","showMessage","valuesObj","isMethodOverridden","VueNotifications","pluginOptions","method","cb","addMethods","targetObj","typesObj","v","setMethod","name","options","methods","makeMethod","configName","newConfig","Object","assign","propertyName","initVueNotificationPlugin","notifications","$options","$emit","unlinkVueNotificationPlugin","attachedMethods","undefined","makeMixin","init","notificationsField","info","installed","alreadyInstalled","mixin","setPluginOptions","types","window","use","_private"],"mappings":"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"}